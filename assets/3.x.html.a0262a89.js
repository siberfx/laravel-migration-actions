import{_ as e,z as a,A as n,a6 as s}from"./framework.2b954cae.js";const t={},o=s(`<h1 id="upgrading-to-3-x-from-2-x" tabindex="-1"><a class="header-anchor" href="#upgrading-to-3-x-from-2-x" aria-hidden="true">#</a> Upgrading To 3.x from 2.x</h1><h3 id="high-impact-changes" tabindex="-1"><a class="header-anchor" href="#high-impact-changes" aria-hidden="true">#</a> High Impact Changes</h3><ul><li><a href="#configuration">Change the location of the configuration file</a></li><li><a href="#anonymous-classes">Replacing named classes with anonymous ones</a></li><li><a href="#parent-namespace">Changing the namespace of the parent class</a></li><li><a href="#changed-properties">Changing variable names from <code>snake_case</code> to <code>camelCase</code> and added typing</a></li><li><a href="#added-recursive-search-for-actions-in-a-folder">Added recursive search for actions in a folder</a></li><li><a href="#php-802-required">PHP 7.3 and 7.4 was dropped</a></li><li>Laravel 6.0 was dropped</li><li>Dragon Code: Contracts (<code>dragon-code/contracts</code>) was dropped</li></ul><h3 id="medium-impact-changes" tabindex="-1"><a class="header-anchor" href="#medium-impact-changes" aria-hidden="true">#</a> Medium Impact Changes</h3><ul><li><a href="#changed-action-repository">Changing the name of an action column in the database</a></li><li><a href="#actions-location">Action storage directory changed</a></li></ul><h2 id="the-easiest-way-to-upgrade" tabindex="-1"><a class="header-anchor" href="#the-easiest-way-to-upgrade" aria-hidden="true">#</a> The easiest way to upgrade</h2><blockquote><p>Note If you used inheritance of actions from other actions, then you will need to process these files manually.</p></blockquote><p>For your convenience, we have created an upgrade console command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">composer</span> require dragon-code/laravel-migration-actions:^3.0
php artisan migrate:actions:upgrade
php artisan migrate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It will do the following:</p><ul><li>Change the namespace of the abstract class</li><li>Add a strict type declaration</li><li>Replace the <code>up</code> method with <code>__invoke</code> if the class does not have a <code>down</code> method</li><li>Replace named classes with anonymous ones</li><li>Create a configuration file according to the data saved in your project</li><li>Changes properties from <code>snake_case</code> to <code>camelCase</code></li></ul><h2 id="updating-dependencies" tabindex="-1"><a class="header-anchor" href="#updating-dependencies" aria-hidden="true">#</a> Updating Dependencies</h2><h3 id="php-8-0-2-required" tabindex="-1"><a class="header-anchor" href="#php-8-0-2-required" aria-hidden="true">#</a> PHP 8.0.2 Required</h3><p>Laravel Actions now requires PHP 8.0.2 or greater.</p><h3 id="composer-dependencies" tabindex="-1"><a class="header-anchor" href="#composer-dependencies" aria-hidden="true">#</a> Composer Dependencies</h3><p>You should update the following dependency in your application&#39;s <code>composer.json</code> file:</p><ul><li><code>dragon-code/laravel-migration-actions</code> to <code>^3.0</code></li></ul><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><p>Publish the config file and migrate the settings from the <code>config/database.php</code> file to <code>config/actions.php</code>.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan vendor:publish <span class="token parameter variable">--provider</span><span class="token operator">=</span><span class="token string">&quot;DragonCode\\LaravelActions\\ServiceProvider&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="actions-location" tabindex="-1"><a class="header-anchor" href="#actions-location" aria-hidden="true">#</a> Actions Location</h2><p>Move the action files to the <code>actions</code> folder in the project root, or update the <code>actions.path</code> option in the configuration file.</p><h2 id="parent-namespace" tabindex="-1"><a class="header-anchor" href="#parent-namespace" aria-hidden="true">#</a> Parent Namespace</h2><p>Replace <code>DragonCode\\LaravelActions\\Support\\Actionable</code> with <code>DragonCode\\LaravelActions\\Action</code>.</p><h2 id="anonymous-classes" tabindex="-1"><a class="header-anchor" href="#anonymous-classes" aria-hidden="true">#</a> Anonymous Classes</h2><p>Replace named calls to your application&#39;s classes with anonymous ones.</p><p>For example:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// before</span>
<span class="token keyword">use</span> <span class="token package">DragonCode<span class="token punctuation">\\</span>LaravelActions<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>Actionable</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Some</span> <span class="token keyword">extends</span> <span class="token class-name">Actionable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// after</span>
<span class="token keyword">use</span> <span class="token package">DragonCode<span class="token punctuation">\\</span>LaravelActions<span class="token punctuation">\\</span>Action</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">class</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token class-name">Action</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="invokable-method" tabindex="-1"><a class="header-anchor" href="#invokable-method" aria-hidden="true">#</a> Invokable Method</h2><p>If your class does not contain a <code>down</code> method, then you can replace the <code>up</code> method with <code>__invoke</code>.</p><h2 id="changed-action-repository" tabindex="-1"><a class="header-anchor" href="#changed-action-repository" aria-hidden="true">#</a> Changed Action Repository</h2><p>Just call the <code>php artisan migrate</code> command to make changes to the action repository table.</p><h2 id="changed-properties" tabindex="-1"><a class="header-anchor" href="#changed-properties" aria-hidden="true">#</a> Changed Properties</h2><p>Make sure all overridden properties are typed:</p><table><thead><tr><th>Old Name</th><th>New Name</th></tr></thead><tbody><tr><td>protected $once</td><td>protected bool $once</td></tr><tr><td>protected $transactions</td><td>protected bool $transactions</td></tr><tr><td>protected $transaction_attempts</td><td>protected int $transactionAttempts</td></tr><tr><td>protected $environment</td><td>protected string|array|null $environment</td></tr><tr><td>protected $except_environment</td><td>protected string|array|null $exceptEnvironment</td></tr><tr><td>protected $before</td><td>protected bool $before</td></tr></tbody></table><h2 id="added-recursive-search-for-actions-in-a-folder" tabindex="-1"><a class="header-anchor" href="#added-recursive-search-for-actions-in-a-folder" aria-hidden="true">#</a> Added recursive search for actions in a folder</h2><h3 id="before" tabindex="-1"><a class="header-anchor" href="#before" aria-hidden="true">#</a> Before:</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>2022_10_13_013321_test1
2022_10_13_013326_test2
bar/2022_10_13_013323_test3 <span class="token comment"># will not be called</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="after" tabindex="-1"><a class="header-anchor" href="#after" aria-hidden="true">#</a> After:</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>2022_10_13_013321_test1
2022_10_13_013326_test2
bar/2022_10_13_013323_test3 <span class="token comment"># will be called</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,40),i=[o];function d(r,c){return a(),n("div",null,i)}const p=e(t,[["render",d],["__file","3.x.html.vue"]]);export{p as default};
